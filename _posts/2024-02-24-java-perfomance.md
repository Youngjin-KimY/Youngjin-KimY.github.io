title: "HotSpot and JIT"
categories:

  - JVM

tags:
  - JIT
  - HotSpot



----



G1GC 기준 종료화 큐에 들어가는 객체는 **초기 마킹** 과정에서 결정됩니다.

**G1GC의 종료화 큐 처리 과정:**

1. **초기 마킹:** G1GC는 Young GC와 Full GC를 수행하기 전에 초기 마킹 단계를 수행합니다. 이 단계에서 GC는 모든 live 객체를 찾아서 marking합니다.
2. **참조 큐 스캐닝:** 초기 마킹 과정에서 GC는 참조 큐를 스캔하여 더 이상 참조되지 않는 객체를 찾습니다.
3. **종료화 큐 추가:** 더 이상 참조되지 않는 객체는 종료화 큐에 추가됩니다.
4. **종료화:** 종료화 스레드는 종료화 큐에서 객체를 하나씩 가져와 finalize() 메서드를 호출합니다.
5. **GC 수집:** finalize() 메서드가 실행되면 GC는 객체를 메모리에서 제거합니다.

**참고:**

- G1GC는 concurrent marking이라는 기술을 사용하여 초기 마킹 과정을 병렬적으로 수행합니다.
- finalize() 메서드는 GC 스레드가 아닌 종료화 스레드에서 실행됩니다.
- 종료화 큐에 들어간 객체는 finalize() 메서드가 실행되기 전까지는 메모리에서 제거되지 않습니다.

